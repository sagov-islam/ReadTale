import Fetcher from"./Fetcher.min.js";export default class Filter{#t=new Fetcher;constructor(t){this.props=t}sort(){let t=this.props.genres;const e=0!==this.props.sorting.length?this.props.sorting:["Сначала самые высокооцененные"],s=this.props.callback;if("Сначала самые высокооцененные"===e[0]){let e;return e="Все жанры"===t||"object"==typeof t&&t.length<=0?this.#t.getBooksInfo():this.#e(),void e.then((t=>{const e=this.#s(t);s(e)}))}if("Сначала самые низкооцененные"===e[0]){let e;return e="Все жанры"===t||"object"==typeof t&&t.length<=0?this.#t.getBooksInfo():this.#e(),void e.then((t=>{const e=this.#r(t);s(e)}))}}#s(t){return t.sort(((t,e)=>e.stars-t.stars)),t}#r(t){return t.sort(((t,e)=>t.stars-e.stars)),t}#e(){let t=this.props.genres,e=[];return this.#t.getBooksInfo().then((s=>(s.forEach((s=>{let r=!1;for(let o of s.genres)r||t.forEach((t=>{o.toLowerCase()===t.toLowerCase()&&(e.push(s),r=!0)}))})),e)))}}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkZpbHRlci5taW4uanMiXSwibmFtZXMiOlsiRmV0Y2hlciIsIkZpbHRlciIsImNvbnN0cnVjdG9yIiwicHJvcHMiLCJ0aGlzIiwic29ydCIsImdlbnJlcyIsInNvcnRpbmciLCJsZW5ndGgiLCJjYWxsYmFjayIsIm1ldGhvZCIsImdldEJvb2tzSW5mbyIsInNvcnRCeUdlbnJlcyIsInRoZW4iLCJib29rcyIsInNvcnRlZEJvb2tzSW5mbyIsInNvcnRIaWdobHlSYXRlZEZpcnN0Iiwic29ydExvd1JhdGVkRmlyc3QiLCJhIiwiYiIsInN0YXJzIiwic29ydGVkQm9va3MiLCJkYXRhIiwiZm9yRWFjaCIsImJvb2siLCJoYXNHZW5yZSIsImdlbnJlIiwic2VsZWN0ZWRHZW5yZSIsInRvTG93ZXJDYXNlIiwicHVzaCJdLCJtYXBwaW5ncyI6Ik9BQU9BLFlBQWEsa0NBRUwsTUFBTUMsT0FDakJELEdBQVcsSUFBSUEsUUFFZkUsWUFBWUMsR0FDUkMsS0FBS0QsTUFBUUEsRUFJakJFLE9BQ0ksSUFBSUMsRUFBU0YsS0FBS0QsTUFBTUcsT0FDeEIsTUFBTUMsRUFBd0MsSUFBOUJILEtBQUtELE1BQU1JLFFBQVFDLE9BQWVKLEtBQUtELE1BQU1JLFFBQVUsQ0FBQyxpQ0FDbEVFLEVBQVdMLEtBQUtELE1BQU1NLFNBRTVCLEdBQW1CLGtDQUFmRixFQUFRLEdBQXdDLENBQ2hELElBQUlHLEVBWUosT0FUSUEsRUFEVyxjQUFYSixHQUE0QyxpQkFBWEEsR0FBdUJBLEVBQU9FLFFBQVUsRUFDaEVKLE1BQUtKLEVBQVNXLGVBRWRQLE1BQUtRLFNBR2xCRixFQUFPRyxNQUFLQyxJQUNSLE1BQU1DLEVBQWtCWCxNQUFLWSxFQUFzQkYsR0FDbkRMLEVBQVNNLE1BS2pCLEdBQW1CLGlDQUFmUixFQUFRLEdBQXVDLENBQy9DLElBQUlHLEVBWUosT0FUSUEsRUFEVyxjQUFYSixHQUE0QyxpQkFBWEEsR0FBdUJBLEVBQU9FLFFBQVUsRUFDaEVKLE1BQUtKLEVBQVNXLGVBRWRQLE1BQUtRLFNBR2xCRixFQUFPRyxNQUFLQyxJQUNSLE1BQU1DLEVBQWtCWCxNQUFLYSxFQUFtQkgsR0FDaERMLEVBQVNNLE9BU3JCQyxHQUFzQkYsR0FFbEIsT0FEQUEsRUFBTVQsTUFBSyxDQUFDYSxFQUFHQyxJQUFNQSxFQUFFQyxNQUFRRixFQUFFRSxRQUMxQk4sRUFHWEcsR0FBbUJILEdBRWYsT0FEQUEsRUFBTVQsTUFBSyxDQUFDYSxFQUFHQyxJQUFNRCxFQUFFRSxNQUFRRCxFQUFFQyxRQUMxQk4sRUFHWEYsS0FDSSxJQUFJTixFQUFTRixLQUFLRCxNQUFNRyxPQUNwQmUsRUFBYyxHQUVsQixPQUFPakIsTUFBS0osRUFBU1csZUFBZUUsTUFBS1MsSUFDckNBLEVBQUtDLFNBQVFDLElBQ1QsSUFBSUMsR0FBVyxFQUVmLElBQUssSUFBSUMsS0FBU0YsRUFBS2xCLE9BQ2ZtQixHQUVKbkIsRUFBT2lCLFNBQVNJLElBQ1JELEVBQU1FLGdCQUFrQkQsRUFBY0MsZ0JBRXRDUCxFQUFZUSxLQUFLTCxHQUNqQkMsR0FBVyxTQUtwQkoiLCJmaWxlIjoiRmlsdGVyLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBGZXRjaGVyIGZyb20gJy4vRmV0Y2hlci5taW4uanMnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGaWx0ZXIge1xyXG4gICAgI0ZldGNoZXIgPSBuZXcgRmV0Y2hlcigpO1xyXG4gICAgXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHRoaXMucHJvcHMgPSBwcm9wc1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFBVQkxJQyAtLS0tPlxyXG4gICAgc29ydCgpIHtcclxuICAgICAgICBsZXQgZ2VucmVzID0gdGhpcy5wcm9wcy5nZW5yZXM7XHJcbiAgICAgICAgY29uc3Qgc29ydGluZyA9IHRoaXMucHJvcHMuc29ydGluZy5sZW5ndGggIT09IDAgPyB0aGlzLnByb3BzLnNvcnRpbmcgOiBbJ9Ch0L3QsNGH0LDQu9CwINGB0LDQvNGL0LUg0LLRi9GB0L7QutC+0L7RhtC10L3QtdC90L3Ri9C1J107XHJcbiAgICAgICAgY29uc3QgY2FsbGJhY2sgPSB0aGlzLnByb3BzLmNhbGxiYWNrO1xyXG5cclxuICAgICAgICBpZiAoc29ydGluZ1swXSA9PT0gJ9Ch0L3QsNGH0LDQu9CwINGB0LDQvNGL0LUg0LLRi9GB0L7QutC+0L7RhtC10L3QtdC90L3Ri9C1Jykge1xyXG4gICAgICAgICAgICBsZXQgbWV0aG9kO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGdlbnJlcyA9PT0gJ9CS0YHQtSDQttCw0L3RgNGLJyB8fCB0eXBlb2YgZ2VucmVzID09PSAnb2JqZWN0JyAmJiBnZW5yZXMubGVuZ3RoIDw9IDApIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZCA9IHRoaXMuI0ZldGNoZXIuZ2V0Qm9va3NJbmZvKCkgO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kID0gdGhpcy4jc29ydEJ5R2VucmVzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICBcclxuICAgICAgICAgICAgbWV0aG9kLnRoZW4oYm9va3MgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc29ydGVkQm9va3NJbmZvID0gdGhpcy4jc29ydEhpZ2hseVJhdGVkRmlyc3QoYm9va3MpO1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soc29ydGVkQm9va3NJbmZvKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc29ydGluZ1swXSA9PT0gJ9Ch0L3QsNGH0LDQu9CwINGB0LDQvNGL0LUg0L3QuNC30LrQvtC+0YbQtdC90LXQvdC90YvQtScpIHtcclxuICAgICAgICAgICAgbGV0IG1ldGhvZDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChnZW5yZXMgPT09ICfQktGB0LUg0LbQsNC90YDRiycgfHwgdHlwZW9mIGdlbnJlcyA9PT0gJ29iamVjdCcgJiYgZ2VucmVzLmxlbmd0aCA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2QgPSB0aGlzLiNGZXRjaGVyLmdldEJvb2tzSW5mbygpIDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZCA9IHRoaXMuI3NvcnRCeUdlbnJlcygpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBtZXRob2QudGhlbihib29rcyA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzb3J0ZWRCb29rc0luZm8gPSB0aGlzLiNzb3J0TG93UmF0ZWRGaXJzdChib29rcyk7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhzb3J0ZWRCb29rc0luZm8pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyA8LS0tLSBQVUJMSUNcclxuXHJcblxyXG4gICAgLy8gUFJJVkFURSAtLS0tPlxyXG4gICAgI3NvcnRIaWdobHlSYXRlZEZpcnN0KGJvb2tzKSB7XHJcbiAgICAgICAgYm9va3Muc29ydCgoYSwgYikgPT4gYi5zdGFycyAtIGEuc3RhcnMpO1xyXG4gICAgICAgIHJldHVybiBib29rc1xyXG4gICAgfVxyXG5cclxuICAgICNzb3J0TG93UmF0ZWRGaXJzdChib29rcykge1xyXG4gICAgICAgIGJvb2tzLnNvcnQoKGEsIGIpID0+IGEuc3RhcnMgLSBiLnN0YXJzKTtcclxuICAgICAgICByZXR1cm4gYm9va3NcclxuICAgIH1cclxuXHJcbiAgICAjc29ydEJ5R2VucmVzKCkge1xyXG4gICAgICAgIGxldCBnZW5yZXMgPSB0aGlzLnByb3BzLmdlbnJlc1xyXG4gICAgICAgIGxldCBzb3J0ZWRCb29rcyA9IFtdO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy4jRmV0Y2hlci5nZXRCb29rc0luZm8oKS50aGVuKGRhdGEgPT4geyAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGRhdGEuZm9yRWFjaChib29rID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBoYXNHZW5yZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGdlbnJlIG9mIGJvb2suZ2VucmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhc0dlbnJlKSBjb250aW51ZVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBnZW5yZXMuZm9yRWFjaCgoc2VsZWN0ZWRHZW5yZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2VucmUudG9Mb3dlckNhc2UoKSA9PT0gc2VsZWN0ZWRHZW5yZS50b0xvd2VyQ2FzZSgpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ydGVkQm9va3MucHVzaChib29rKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0dlbnJlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gc29ydGVkQm9va3M7XHJcbiAgICAgICAgfSkgICAgXHJcbiAgICB9XHJcbiAgICAvLyA8LS0tLSBQUklWQVRFXHJcblxyXG59Il19
