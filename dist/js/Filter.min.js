import Fetcher from"./Fetcher.min.js";import DOMWorker from"./DomWorker.min.js";import ReturnHTML from"./ReturnHTML.min.js";export default class Filter{#t=new Fetcher;constructor(t){this.props=t}sort(){let t=this.props.genres;const r=0!==this.props.sorting.length?this.props.sorting:["Сначала самые высокооцененные"],e=this.props.callback;if("Сначала самые высокооцененные"===r[0]){let r;return r="Все жанры"===t||"object"==typeof t&&t.length<=0?this.#t.getBooksInfo():this.#r(),void r.then((t=>{const r=this.#e(t);e(r)}))}if("Сначала самые низкооцененные"===r[0]){let r;return r="Все жанры"===t||"object"==typeof t&&t.length<=0?this.#t.getBooksInfo():this.#r(),void r.then((t=>{const r=this.#s(t);e(r)}))}}#e(t){return t.sort(((t,r)=>r.stars-t.stars)),t}#s(t){return t.sort(((t,r)=>t.stars-r.stars)),t}#r(){let t=this.props.genres,r=[];return this.#t.getBooksInfo().then((e=>(e.forEach((e=>{let s=!1;for(let o of e.genres)s||t.forEach((t=>{o.toLowerCase()===t.toLowerCase()&&(r.push(e),s=!0)}))})),r)))}}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkZpbHRlci5taW4uanMiXSwibmFtZXMiOlsiRmV0Y2hlciIsIkRPTVdvcmtlciIsIlJldHVybkhUTUwiLCJGaWx0ZXIiLCJjb25zdHJ1Y3RvciIsInByb3BzIiwidGhpcyIsInNvcnQiLCJnZW5yZXMiLCJzb3J0aW5nIiwibGVuZ3RoIiwiY2FsbGJhY2siLCJtZXRob2QiLCJnZXRCb29rc0luZm8iLCJzb3J0QnlHZW5yZXMiLCJ0aGVuIiwiYm9va3MiLCJzb3J0ZWRCb29rc0luZm8iLCJzb3J0SGlnaGx5UmF0ZWRGaXJzdCIsInNvcnRMb3dSYXRlZEZpcnN0IiwiYSIsImIiLCJzdGFycyIsInNvcnRlZEJvb2tzIiwiZGF0YSIsImZvckVhY2giLCJib29rIiwiaGFzR2VucmUiLCJnZW5yZSIsInNlbGVjdGVkR2VucmUiLCJ0b0xvd2VyQ2FzZSIsInB1c2giXSwibWFwcGluZ3MiOiJPQUFPQSxZQUFhLDBCQUNiQyxjQUFlLDRCQUNmQyxlQUFnQixxQ0FFUixNQUFNQyxPQUNqQkgsR0FBVyxJQUFJQSxRQUVmSSxZQUFZQyxHQUNSQyxLQUFLRCxNQUFRQSxFQU1qQkUsT0FDSSxJQUFJQyxFQUFTRixLQUFLRCxNQUFNRyxPQUN4QixNQUFNQyxFQUF3QyxJQUE5QkgsS0FBS0QsTUFBTUksUUFBUUMsT0FBZUosS0FBS0QsTUFBTUksUUFBVSxDQUFDLGlDQUNsRUUsRUFBV0wsS0FBS0QsTUFBTU0sU0FFNUIsR0FBbUIsa0NBQWZGLEVBQVEsR0FBd0MsQ0FDaEQsSUFBSUcsRUFZSixPQVRJQSxFQURXLGNBQVhKLEdBQTRDLGlCQUFYQSxHQUF1QkEsRUFBT0UsUUFBVSxFQUNoRUosTUFBS04sRUFBU2EsZUFFZFAsTUFBS1EsU0FHbEJGLEVBQU9HLE1BQUtDLElBQ1IsTUFBTUMsRUFBa0JYLE1BQUtZLEVBQXNCRixHQUNuREwsRUFBU00sTUFLakIsR0FBbUIsaUNBQWZSLEVBQVEsR0FBdUMsQ0FDL0MsSUFBSUcsRUFZSixPQVRJQSxFQURXLGNBQVhKLEdBQTRDLGlCQUFYQSxHQUF1QkEsRUFBT0UsUUFBVSxFQUNoRUosTUFBS04sRUFBU2EsZUFFZFAsTUFBS1EsU0FHbEJGLEVBQU9HLE1BQUtDLElBQ1IsTUFBTUMsRUFBa0JYLE1BQUthLEVBQW1CSCxHQUNoREwsRUFBU00sT0FTckJDLEdBQXNCRixHQUVsQixPQURBQSxFQUFNVCxNQUFLLENBQUNhLEVBQUdDLElBQU1BLEVBQUVDLE1BQVFGLEVBQUVFLFFBQzFCTixFQUdYRyxHQUFtQkgsR0FFZixPQURBQSxFQUFNVCxNQUFLLENBQUNhLEVBQUdDLElBQU1ELEVBQUVFLE1BQVFELEVBQUVDLFFBQzFCTixFQUdYRixLQUNJLElBQUlOLEVBQVNGLEtBQUtELE1BQU1HLE9BQ3BCZSxFQUFjLEdBRWxCLE9BQU9qQixNQUFLTixFQUFTYSxlQUFlRSxNQUFLUyxJQUNyQ0EsRUFBS0MsU0FBUUMsSUFDVCxJQUFJQyxHQUFXLEVBRWYsSUFBSyxJQUFJQyxLQUFTRixFQUFLbEIsT0FDZm1CLEdBRUpuQixFQUFPaUIsU0FBU0ksSUFDUkQsRUFBTUUsZ0JBQWtCRCxFQUFjQyxnQkFFdENQLEVBQVlRLEtBQUtMLEdBQ2pCQyxHQUFXLFNBS3BCSiIsImZpbGUiOiJGaWx0ZXIubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEZldGNoZXIgZnJvbSAnLi9GZXRjaGVyLm1pbi5qcydcclxuaW1wb3J0IERPTVdvcmtlciBmcm9tICcuL0RvbVdvcmtlci5taW4uanMnO1xyXG5pbXBvcnQgUmV0dXJuSFRNTCBmcm9tICcuL1JldHVybkhUTUwubWluLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZpbHRlciB7XHJcbiAgICAjRmV0Y2hlciA9IG5ldyBGZXRjaGVyKCk7XHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICAgICAgdGhpcy5wcm9wcyA9IHByb3BzXHJcblxyXG5cclxuICAgIH1cclxuXHJcbiAgICAvLyBQVUJMSUMgLS0tLT5cclxuICAgIHNvcnQoKSB7XHJcbiAgICAgICAgbGV0IGdlbnJlcyA9IHRoaXMucHJvcHMuZ2VucmVzO1xyXG4gICAgICAgIGNvbnN0IHNvcnRpbmcgPSB0aGlzLnByb3BzLnNvcnRpbmcubGVuZ3RoICE9PSAwID8gdGhpcy5wcm9wcy5zb3J0aW5nIDogWyfQodC90LDRh9Cw0LvQsCDRgdCw0LzRi9C1INCy0YvRgdC+0LrQvtC+0YbQtdC90LXQvdC90YvQtSddO1xyXG4gICAgICAgIGNvbnN0IGNhbGxiYWNrID0gdGhpcy5wcm9wcy5jYWxsYmFjaztcclxuXHJcbiAgICAgICAgaWYgKHNvcnRpbmdbMF0gPT09ICfQodC90LDRh9Cw0LvQsCDRgdCw0LzRi9C1INCy0YvRgdC+0LrQvtC+0YbQtdC90LXQvdC90YvQtScpIHtcclxuICAgICAgICAgICAgbGV0IG1ldGhvZDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChnZW5yZXMgPT09ICfQktGB0LUg0LbQsNC90YDRiycgfHwgdHlwZW9mIGdlbnJlcyA9PT0gJ29iamVjdCcgJiYgZ2VucmVzLmxlbmd0aCA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2QgPSB0aGlzLiNGZXRjaGVyLmdldEJvb2tzSW5mbygpIDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZCA9IHRoaXMuI3NvcnRCeUdlbnJlcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG1ldGhvZC50aGVuKGJvb2tzID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNvcnRlZEJvb2tzSW5mbyA9IHRoaXMuI3NvcnRIaWdobHlSYXRlZEZpcnN0KGJvb2tzKTtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHNvcnRlZEJvb2tzSW5mbyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHNvcnRpbmdbMF0gPT09ICfQodC90LDRh9Cw0LvQsCDRgdCw0LzRi9C1INC90LjQt9C60L7QvtGG0LXQvdC10L3QvdGL0LUnKSB7XHJcbiAgICAgICAgICAgIGxldCBtZXRob2Q7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoZ2VucmVzID09PSAn0JLRgdC1INC20LDQvdGA0YsnIHx8IHR5cGVvZiBnZW5yZXMgPT09ICdvYmplY3QnICYmIGdlbnJlcy5sZW5ndGggPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kID0gdGhpcy4jRmV0Y2hlci5nZXRCb29rc0luZm8oKSA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2QgPSB0aGlzLiNzb3J0QnlHZW5yZXMoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbWV0aG9kLnRoZW4oYm9va3MgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc29ydGVkQm9va3NJbmZvID0gdGhpcy4jc29ydExvd1JhdGVkRmlyc3QoYm9va3MpO1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soc29ydGVkQm9va3NJbmZvKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gPC0tLS0gUFVCTElDXHJcblxyXG5cclxuICAgIC8vIFBSSVZBVEUgLS0tLT5cclxuICAgICNzb3J0SGlnaGx5UmF0ZWRGaXJzdChib29rcykge1xyXG4gICAgICAgIGJvb2tzLnNvcnQoKGEsIGIpID0+IGIuc3RhcnMgLSBhLnN0YXJzKTtcclxuICAgICAgICByZXR1cm4gYm9va3NcclxuICAgIH1cclxuXHJcbiAgICAjc29ydExvd1JhdGVkRmlyc3QoYm9va3MpIHtcclxuICAgICAgICBib29rcy5zb3J0KChhLCBiKSA9PiBhLnN0YXJzIC0gYi5zdGFycyk7XHJcbiAgICAgICAgcmV0dXJuIGJvb2tzXHJcbiAgICB9XHJcblxyXG4gICAgI3NvcnRCeUdlbnJlcygpIHtcclxuICAgICAgICBsZXQgZ2VucmVzID0gdGhpcy5wcm9wcy5nZW5yZXNcclxuICAgICAgICBsZXQgc29ydGVkQm9va3MgPSBbXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI0ZldGNoZXIuZ2V0Qm9va3NJbmZvKCkudGhlbihkYXRhID0+IHsgICAgICAgICAgIFxyXG4gICAgICAgICAgICBkYXRhLmZvckVhY2goYm9vayA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaGFzR2VucmUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBnZW5yZSBvZiBib29rLmdlbnJlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChoYXNHZW5yZSkgY29udGludWVcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZ2VucmVzLmZvckVhY2goKHNlbGVjdGVkR2VucmUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdlbnJlLnRvTG93ZXJDYXNlKCkgPT09IHNlbGVjdGVkR2VucmUudG9Mb3dlckNhc2UoKSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRlZEJvb2tzLnB1c2goYm9vayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNHZW5yZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHNvcnRlZEJvb2tzO1xyXG4gICAgICAgIH0pICAgIFxyXG4gICAgfVxyXG4gICAgLy8gPC0tLS0gUFJJVkFURVxyXG5cclxufSJdfQ==
